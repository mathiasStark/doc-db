-- VIEWS

-- VIEWS SÃO ALIAS QUE SAO DADOS AS QUERYS PARA QUE ELAS SEJAM INVOCADAS DE MANEIRA MAIS FACIL, SEM A NECESSIDADE DE FICAR REPETINDO O BLOCO DE CODIGO;

CRIANDO VIEW

CREATE VIEW <NOME-DA-VIEW> AS
<QUERY COMPLETA>;

CREATE VIEW RELATORIO AS
 SELECT 
	c.NOME, 
	IFNULL(c.EMAIL, 'NAO TEM EMAIL') EMAIL, 
	e.ESTADO, 
	t.NUMERO
 FROM CLIENTE C
 INNER JOIN ENDERECO e ON c.IDCLIENTE = e.ID_CLIENTE
 INNER JOIN TELEFONE t ON c.IDCLIENTE = t.ID_CLIENTE;


--É POSSIVEL FAZER OUTRA QUERY DENTRO DA VIEW;

	SELECT NOME FROM RELATORIO;
	SELLECT * FROM <NOME VIEW>;

--LOCALIZANDO VIEWS NO DATABASE;
SHOW TABLES;
A VIEW NÃO DUPLICA OS DADOS NO BANCO. ELA É UMA TABELA VIRTUAL. POR ISSO APARECE COM O COMANDO SHOW TABLES;

--APAGANDO VIEW
DROP VIEW <NOME VIEW>;

--NÃO É POSSIVEL UTILIZAR COMANDOS DML COMO INSERT E DELETE NAS VIEWS QUE CONTÉM INNER JOIN, APENAS EM VIEWS QUE CONTÉM APENAS 1 TABELA.
--UPDATE É LIBERADO EM AMBOS OS CASOS;
--A VIEW É UM PONTEIRO, VAI NA TABELA E ATUALIZA OS DADOS;

UPDATE <NOME VIEW> SET <NOME COLUNA> = <NOVO VALOR> WHERE <CONDICAO>;

   


